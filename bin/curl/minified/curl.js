(function(j,r,n){function h(a,c){return I.call(a).indexOf("[object "+c)==0}function A(a){w=a.baseUrl||"";var c=a.paths,b;for(b in c)f[b]=c[b].charAt(c[b].length-1)=="/"?c[b].substr(0,c[b].length-1):c[b],b.charAt(b.length-1)=="/"&&(f[b.charAt(b.length-1)=="/"?b.substr(0,b.length-1):b]=f[b],delete f[b]);if(!("curl"in f)){var d;c=r.getElementsByTagName("script");for(b=c.length-1;b>=0&&!d;b--)d=c[b].src.match(J);f.curl=d[1]}x=a.pluginPath||s(f.curl,"plugin")}function t(a){function c(a){return y(a.replace(o,
b.baseName),w)}var b={};b.baseName=a.substr(0,a.lastIndexOf("/")+1);b.c=function(a,c){return K(a,c,b)};b.c.toUrl=c;b.j={};b.m={id:a.replace(o,b.baseName),uri:c(a)};return b}function k(){this.f=[];this.h=[]}function p(a,c){k.call(this);this.name=a;this.l=c}function s(a,c){return(!a||a.charAt(a.length-1)=="/"?a:a+"/")+c}function y(a,c){var b="",d="",e=f[a];for(B.lastIndex=0;(b+=B.exec(a))&&f[b]&&b!=d;)d=b;e=(f[d]||"")+a.substr(d.length);L.test(e)||(e=s(c,e));return e}function M(a,c,b){var d=r.createElement("script");
d.type="text/javascript";d.onload=d.onreadystatechange=function(b){b=b||j.event;if(b.type==="load"||N[this.readyState])delete u[a.name],this.onload=this.onreadystatechange=this.onerror=null,c(d)};d.onerror=function(){b(Error("Script error: "+a.url+C))};d.charset=a.charset||"utf-8";d.async="async"in a?a.async:!0;d.src=a.url;u[a.name]=d;D.insertBefore(d,D.firstChild)}function E(a,c){function b(a){return h(a,"Function")?a:function(){return a}}var d,e,i,g=a.length;g===3?(d=a[0],e=a[1],i=b(a[2])):g==2?
(h(a[0],"String")?d=a[0]:e=a[0],i=b(a[1])):h(a[0],"String")||h(a[0],"Array")&&c?e=a[0]:i=b(a[0]);return{name:d,i:e,g:i}}function F(a,c){function b(b){a.d(b)}function d(b){a.a(b)}var e=t(a.name);G(c.i,e,function(a){(a=c.g.apply(e.j,a)||e.j)&&h(a.then,"Function")?a.then(b,d):b(a)},d)}function O(a,c){var b=l[a]=new p(a,c);b.url=y(a,w)+".js";M(b,function(){var a=q;q=z;b.n!==!1&&(a?a.k?b.a(Error(a.k.replace("${url}",b.url))):F(b,a):b.a(Error("define() not found: "+b.url+C)))},function(a){b.a(a)});return b}
function P(a,c,b,d){function e(a){g.d(a)}var i=c;c=y(c,"");c.indexOf("/")<0&&c==i&&(a=s(x,a),c=s(x,c));var g=l[a]=new p(b,d);e.resolve=e;e.reject=function(a){g.a(a)};e.then=function(a,b){g.b(a,b)};d.c([c],function(a){a.load(b,t(b).c,e,n)});return g}function G(a,c,b,d){for(var e=[],i=a?a.length:0,g=i,v=!1,f=0;f<g&&!v;f++)(function(a,f){if(f=="require")e[a]=c.c,i--;else if(f=="exports")e[a]=c.j,i--;else if(f=="module")e[a]=c.m,i--;else{var g,h,j;g=f.indexOf("!");g>=0?(h=f.substr(0,g).replace(o,c.baseName),
j=f.substr(g+1),g=h+"!"+j):j=g=f.replace(o,c.baseName);(l[g]||(h?P(g,h,j,c):O(j,c))).b(function(c){e[a]=c;--i==0&&(v=!0,b(e))},function(a){v=!0;d(a)})}})(f,a[f]);i==0&&!v&&b(e)}function K(a,c,b){if(h(a,"String")){b=l[a].replace(o,b.baseName);var d;b&&b.b(function(a){d=a});if(d===z)throw Error("Resource ("+a+") is not already resolved.");return d}G(a,b,function(a){c.d?c.d(a):c.apply(null,a)},function(a){if(c.a)c.a(a);else throw a;})}function m(){var a=arguments.length;a===3&&A(arguments[0]);var c=
t("");a=E(a===3?Q.call(arguments,1):arguments,!0);if(!h(a.i,"String")){var b=a.g,d=a.g=new k,e={};e.then=function(a,b){d.b(function(b){a&&a.apply(null,b)},function(a){if(b)b(a);else throw a;});return e};e.next=function(a,b){var f=d;d=new k;f.b(function(){c.c(a,d)});b&&d.b(b);return e};b&&e.b(b)}a=c.c(a.i,a.g);return e||a}function H(){var a=E(arguments,!1),c=a.name;if(c==null)if(q!==z)q={k:"Multiple anonymous defines found in ${url}."};else{var b;if(!h(j.opera,"Opera"))for(var d in u)if(u[d].readyState==
"interactive"){b=d;break}if(!(c=b))q=a}if(c!=null)(b=l[c])||(b=l[c]=new p(c,t(c))),b.n=!1,F(b,a)}var D=r.head||r.getElementsByTagName("head")[0],w,x,f={},l={},q,u={},I={}.toString,z,Q=[].slice,B=/(?:\/|^)[^\/$]*/g,L=/^\/|^[^:]*:\/\//,o=/^\.\//,J=/(.*\/curl)\.js$/,N={loaded:1,interactive:1,complete:1},C=". Syntax error or name mismatch.";k.prototype={b:function(a,c){a&&this.f.push(a);c&&this.h.push(c)},d:function(a){this.e(this.f,a)},a:function(a){this.e(this.h,a)},e:function(a,c){this.b=a===this.f?
function(a){a(c)}:function(a,b){b(c)};this.d=this.a=function(){throw Error("Promise already completed.");};for(var b,d=0;b=a[d++];)b(c);delete this.f;delete this.h}};p.prototype=new k;p.prototype.e=function(a,c){k.prototype.e.call(this,a,c);delete this.l;delete this.url};h(n,"Function")||A(n);n.apiName?j[n.apiName]=m:j.require=j.curl=m;m.require=m;j.define=m.define=H;m.version="0.3.2";H.amd={}})(this,document,this.curl||this.require||{});