(function(p,x,j){function l(a,b){return N.call(a).indexOf("[object "+b)==0}function O(a,b){l(a,"String")&&(a={path:n(a),main:D.f,lib:D.e});a.path=a.path||(isNaN(b)?b:a.name);a.e="lib"in a&&n(a.lib.replace(o,a.path+"/"));a.f="main"in a&&n(a.main.replace(o,a.path+"/"));return a}function E(a){var b,d,c,e=[];s=a.baseUrl||"";var f=a.paths;for(b in f)d=n(b),c=q[d]={path:n(f[b])},c.i=(c.path.match(F)||[]).length,e.push(d);f=a.packages;for(b in f)d=n(f[b].name||b),c=q[d]=O(f[b],d),c.i=(c.path.match(F)||[]).length,
e.push(d);G=RegExp("^("+e.sort(function(a,b){return q[a].i<q[b].i}).join("|").replace(/\//g,"\\/")+")(?=\\/|$)");m=a.pluginPath||m}function P(){}function y(a){function b(a){return z(u(a.replace(o,d+"/")),s)}var d=a.substr(0,a.lastIndexOf("/")),c={baseName:d},e={};c.d={h:e,o:{id:a.replace(o,d+"/"),uri:b(a),h:e},b:function(a,b){return A(a,b||P,c)}};c.b=c.d.b;j.debug&&(c.b.curl=k);c.b.toUrl=b;return c}function B(){function a(a,b){f.push([a,b])}function b(a){c(!0,a)}function d(a){c(!1,a)}function c(c,
e){a=c?function(a){a&&a(e)}:function(a,b){b&&b(e)};b=d=function(){throw Error("Promise already completed.");};for(var i,g=0;i=f[g++];)(i=i[c?0:1])&&i(e)}var e=this,f=[];return{c:function(b,c){a(b,c);return e},g:function(a){e.m=a;b(a)},a:function(a){e.p=a;d(a)}}}function v(a){var b=B();b.name=a;return b}function n(a){return a.charAt(a.length-1)=="/"?a.substr(0,a.length-1):a}function u(a){var b;return a.replace(G,function(d){b=q[d]||{};return b.f&&d==a?b.f:b.e?b.e:b.path})}function z(a,b){return(b&&
!Q.test(a)?(!b||b.charAt(b.length-1)=="/"?b:b+"/")+a:a)+(R.test(a)?"":".js")}function S(a,b,d){var c=x.createElement("script");c.type="text/javascript";c.onload=c[H]=function(d){d=d||p.event;if(d.type==="load"||T[this.readyState])delete w[a.name],this.onload=this[H]=this.onerror=null,b(c)};c.onerror=function(){d(Error("Syntax error or http error: "+a.url))};c.charset=a.charset||"utf-8";c.async=!0;c.src=a.url;w[a.name]=c;I.insertBefore(c,I.firstChild)}function U(a){var b,d,c,e,f=a.length;c=a[f-1];
e=l(c,"Function");f==2?l(a[0],"Array")?d=a[0]:b=a[0]:f==3&&(b=a[0],d=a[1]);!d&&e&&c.length>0&&(d=["require","exports","module"]);return{name:b,k:d||[],l:e?c:function(){return c}}}function J(a,b){var d=y(a.name);K(b.k,d,function(c){c=b.l.apply(d.d.h,c)||d.d.h;a.g(c)},a.a)}function L(a){S(a,function(){var b=r;r=C;a.n!==!1&&(b?b.j?a.a(Error(b.j.replace("${url}",a.url))):J(a,b):a.a(Error("define() not found or duplicates found: "+a.url)))},a.a)}function V(a,b){var d,c,e,f;d=a.indexOf("!");if(d>=0){c=
a.substr(0,d);e=a.substr(d+1).replace(o,b.baseName+"/");d=c+"!"+e;var t=u(c);t.indexOf("/")<0&&(t=u((!m||m.charAt(m.length-1)=="/"?m:m+"/")+t));f=g[d];if(!f){var h=g[c];if(!h)h=g[c]=new v(c),h.url=z(t,s),L(h);f=new v(e);e&&(g[d]=f);h.c(function(a){var c=f.g;c.resolve=c;c.reject=f.a;a.load(f.name,b.b,c,j)},f.a)}}else if(e=d=a.replace(o,b.baseName+"/"),f=g[e],!f)f=g[e]=new v(e),f.url=z(u(e),s),L(f);return f}function K(a,b,d,c){for(var e=[],f=a.length,g=f,h=!1,i=0;i<g&&!h;i++)(function(a,g){g in b.d?
(e[a]=b.d[g],f--):V(g,b).c(function(b){e[a]=b;--f==0&&(h=!0,d(e))},function(a){h=!0;c(a)})})(i,a[i]);f==0&&!h&&d(e)}function A(a,b,d){if(l(a,"String")){d=(d=g[a])&&d.m;if(d===C)throw Error("Module is not already resolved: "+a);return d}K(a,d,function(a){b.g?b.g(a):b.apply(null,a)},function(a){if(b.a)b.a(a);else throw a;})}function k(){var a=W.call(arguments),b,d;l(a[0],"Object")&&E(a.shift());b=a[0];a=a[1];d=y("");var c=new B,e={};e.then=function(a,b){c.c(function(b){a&&a.apply(null,b)},function(a){if(b)b(a);
else throw a;});return e};e.next=function(a,b){var g=c;c=new B;g.c(function(){d.b(a,c,d)});b&&c.c(function(a){b.apply(this,a)});return e};a&&e.then(a);d.b(b,c,d);return e}function M(){var a=U(arguments),b=a.name;if(b==null)if(r!==C)r={j:"Multiple anonymous defines found in ${url}."};else{var d;if(!l(p.opera,"Opera"))for(var c in w)if(w[c].readyState=="interactive"){d=c;break}if(!(b=d))r=a}if(b!=null)(d=g[b])||(d=g[b]=new v(b)),d.n=!1,J(d,a,y(b))}var I=x.head||x.getElementsByTagName("head")[0],s,m=
"curl/plugin",q={},g={},r,w={},N={}.toString,C,W=[].slice,Q=/^\/|^[^:]*:\/\//,o=/^\.(\/|$)/,F=/\//,R=/\.\w+$/,G,T={loaded:1,interactive:1,complete:1},H="onreadystatechange",D={f:"./lib/main",e:"./lib"};l(j,"Function")||E(j);j.apiName?p[j.apiName]=k:p.curl=k;if(j.debug)k.cache=A.cache=g,k.cfg=A.cfg=j,k.listen=function(){eval("var orig=which;which=function(){callback.apply(null,arguments);return orig.apply(null,arguments);};")};p.define=k.define=M;k.version="0.4.5";M.amd={plugins:!0}})(this,document,
this.curl||{});
