(function(v,C,g){var G,H;function k(a,b){return R.call(a).indexOf("[object "+b)==0}function S(a){function b(b){if(b in a)return b=a[b].charAt(0)!="."?(!a.path||w(a.path)?a.path:a.path+"/")+a[b]:o(a[b],a.path),p(b)}k(a,"String")&&(a=p(a),a={name:a,path:a,main:G,lib:H});a.path=a.path||"";a.h=b("lib");a.i=b("main");return a}function I(a){var b,c,d,e=[];q=a.baseUrl||"";if(a.debug)x=!0,l.cache=j,l.cfg=a,l.undefine=function(a){delete j[a]};var f=a.paths;for(b in f)c=p(b.replace("!","!/")),d=r[c]={path:p(f[b])},
d.f=(d.path.match(J)||[]).length,e.push(c);f=a.packages;for(b in f)c=p(f[b].name||b),d=r[c]=S(f[b]),d.f=(d.path.match(J)||[]).length,e.push(c);K=RegExp("^("+e.sort(function(a,b){return r[a].f<r[b].f}).join("|").replace(/\//g,"\\/")+")(?=\\/|$)");m=a.pluginPath||m}function T(){}function y(a){function b(a,b){return U(a,b||T,e)}function c(a){return z(s(o(a,d)),q)}var d=a.substr(0,a.lastIndexOf("/")),e={baseName:d},f={};e.d={exports:f,module:{id:o(a,d),uri:c(a),exports:f}};x&&(b.curl=l);e.e=e.d.require=
b;b.toUrl=c;return e}function E(){}function V(a){E.prototype=a;a=new E;E.prototype=A;return a}function F(){function a(a,b){f.push([a,b])}function b(a){d(!0,a)}function c(a){d(!1,a)}function d(d,e){a=d?function(a){a&&a(e)}:function(a,b){b&&b(e)};b=c=function(){throw Error("Promise already completed.");};for(var h,j=0;h=f[j++];)(h=h[d?0:1])&&h(e)}var e=this,f=[];this.b=function(b,d){a(b,d)};this.c=function(a){e.l=a;b(a)};this.a=function(a){e.n=a;c(a)}}function t(a){F.apply(this);this.name=a}function w(a){return a.charAt(a.length-
1)=="/"}function p(a){return w(a)?a.substr(0,a.length-1):a}function s(a,b){function c(a){e=a.replace(K,function(b){d=r[b]||{};f=!0;return d.i&&b==a?d.i:d.h?d.h:d.path||""})}var d,e,f;b&&c(b+"!/"+a);f||c(a);return e}function z(a,b,c){return(b&&!W.test(a)?(!b||w(b)?b:b+"/")+a:a)+(c&&!X.test(a)?".js":"")}function Y(a,b,c){var d=C.createElement("script");d.type="text/javascript";d.onload=d[L]=function(c){c=c||v.event;if(c.type==="load"||Z[this.readyState])delete B[a.name],this.onload=this[L]=this.onerror=
null,b(d)};d.onerror=function(){c(Error("Syntax error or http error: "+a.url))};d.charset=a.charset||"utf-8";d.async=!0;d.src=a.url;B[a.name]=d;M.insertBefore(d,M.firstChild)}function $(a){var b,c,d,e,f=a.length;d=a[f-1];e=k(d,"Function");f==2?k(a[0],"Array")?c=a[0]:b=a[0]:f==3&&(b=a[0],c=a[1]);!c&&e&&d.length>0&&(c=["require","exports","module"]);return{name:b,j:c||[],k:e?d:function(){return d}}}function N(a,b){x&&console&&console.log("curl: resolving",a.name);var c=y(a.baseName||a.name);O(b.j,c,
function(d){try{var e=b.k.apply(c.d.exports,d)||c.d.exports;x&&console&&console.log("curl: defined",a.name,e.toString().substr(0,50).replace(/\n/," "))}catch(f){a.a(f)}a.c(e)},a.a)}function P(a){Y(a,function(){var b=u;u=A;a.m!==!1&&(b?b.g?a.a(Error(b.g.replace("${url}",a.url))):N(a,b):a.a(Error("define() not found or duplicates found: "+a.url)))},a.a)}function o(a,b){return a.replace(aa,function(a,d,e){return(e?b.substr(0,b.lastIndexOf("/")):b)+"/"})}function ba(a,b){var c,d,e,f,i,D;d=a.indexOf("!");
if(d>=0){e=a.substr(0,d);var h=s(e);h.indexOf("/")<0&&(h=s((!m||w(m)?m:m+"/")+h));var n=j[e];if(!n)n=j[e]=new t(e),n.url=z(h,q,!0),n.baseName=h,P(n);D=V(e?g.plugins&&g.plugins[e]:g)||{};var k=function(a){return o(a,b.baseName)};i=j[a]||new t(a);n.b(function(h){var g;f=a.substr(d+1);f="normalize"in h?h.normalize(f,k,D):k(f);c=e+"!"+f;b=y(b.baseName);b.e.toUrl=function(a){a=s(a,e);return z(a,q)};if(!j[c])a!=c&&(g=i,i=j[c]||new t(c),g.b(i.c,i.a)),f&&!h.dynamic&&(j[c]=i),g=i.c,g.resolve=g,g.reject=i.a,
h.load(f,b.e,g,D)},i.a)}else if(f=c=o(a,b.baseName),i=j[f],!i)i=j[f]=new t(f),i.url=z(s(f),q,!0),P(i);return i}function O(a,b,c,d){for(var e=[],f=a.length,i=f,g=!1,h=0;h<i&&!g;h++)(function(a,h){h in b.d?(e[a]=b.d[h],f--):ba(h,b).b(function(b){e[a]=b;--f==0&&(g=!0,c(e))},function(a){g=!0;d(a)})})(h,a[h]);f==0&&!g&&c(e)}function U(a,b,c){if(k(a,"String")){c=(c=j[a])&&c.l;if(c===A)throw Error("Module is not already resolved: "+a);return c}O(a,c,function(a){b.c?b.c(a):b.apply(null,a)},function(a){if(b.a)b.a(a);
else throw a;})}function l(){var a=ca.call(arguments),b,c;k(a[0],"Object")&&(g=a.shift(),I(g));b=[].concat(a[0]);a=a[1];c=y("");var d=new F,e={};e.then=function(a,b){d.b(function(b){a&&a.apply(null,b)},function(a){if(b)b(a);else throw a;});return e};e.next=function(a,b){var g=d;d=new F;g.b(function(){c.e(a,d,c)},function(a){d.a(a)});b&&d.b(function(a){b.apply(this,a)});return e};a&&e.then(a);c.e(b,d,c);return e}function Q(){var a=$(arguments),b=a.name;if(b==null)if(u!==A)u={g:"Multiple anonymous defines found in ${url}."};
else{var c;if(!k(v.opera,"Opera"))for(var d in B)if(B[d].readyState=="interactive"){c=d;break}if(!(b=c))u=a}if(b!=null)(c=j[b])||(c=j[b]=new t(b)),c.m=!1,"resolved"in c||N(c,a,y(b))}var M=C.head||C.getElementsByTagName("head")[0],q,m="curl/plugin",r={},j={},u,B={},R={}.toString,A,ca=[].slice,W=/^\/|^[^:]+:\/\//,aa=/^(\.)(\.)?(\/|$)/,J=/\//,X=/\?/,K,Z={loaded:1,interactive:1,complete:1},L="onreadystatechange";G="./lib/main";H="./lib";var x;k(g,"Function")||I(g);(g.apiContext||v)[g.apiName||"curl"]=
l;v.define=l.define=Q;l.version="0.5.2";Q.amd={plugins:!0}})(this,document,this.curl||{});
