<!DOCTYPE HTML>
<html>
<head>
<title>CommonJS Modules 1.1 loading test</title>

<script>

	curl = {
		paths: {
			curl: '..',
			commonjs: 'support/commonjs'
		}
	};

</script>
<script src="../curl.js"></script>


<script type="text/javascript">

	curl(
		[
			// test modules:
			'commonjs/exports',
			'commonjs/this',
			'commonjs/hybrid'
		]
	).then(
		function (exports, thisModule, hybrid) {
			write('A module that exports properties loaded successfully if "it works" == ' + exports.testMessage + '.');
			write('A module that exports as `this` loaded successfully if "it works" == ' + thisModule.testMessage + '.');
			write('A module that inspects `require("module")` loaded successfully if "commonjs/module" == ' + hybrid.foo().testMessage + '.');
			write('A module that exposes its module info loaded successfully if this "commonjs/this" == ' + thisModule._module.id + '.');
		},
		function (ex) {
			write('ERROR: ' + ex.message);
			console.log(ex.message);
			if (ex.stack) console.log(ex.stack);
		}
	);

	function write (msg) {
		curl(['curl/domReady'], function (ready) {
			ready(function () {
				document.body.appendChild(document.createElement('div')).innerHTML = msg;
			});
		});
	}

</script>

</head>
<body>

</body>
</html>
